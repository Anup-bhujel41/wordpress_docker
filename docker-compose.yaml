version: "3"

services:
  #database
    db:
      image: mysql:5.7
      volumes: 
        - db_data:/var/lib/mysql
      restart: always
      environment: 
        MYSQL_ROOT_PASSWORD: password
        MYSQL_DATABASE: wordpress
        MYSQL_USER: wordpress  
        MYSQL_PASSWORD: wordpress
      networks:
        -wpsite
  #PHPMYADMIN
    phpmyadmin: 
      depends_on:
        - db
      image: phpmyadmin/phpmyadmin
      restart: always
      ports:
        - '8001:80' #8000 of the server to the 80 of the container
      environment:
        PMA_HOST: db
        MYSQL_ROOT_PASSOWRD: password
      networks:
        -wpsite
  #wordpress
      -wordpress:
        depends_on:
          -db
        image: wordpress:latest
        ports:
          - '8000:80' #8000 of server to 80 of the container
        restart: always
          volumes: 
          - './:/var/www/html'   #webroot of wordpress apache server wordpress files
        environment:
          WORDPRESS_DB_HOST: db:3306
          WORDPRESS_USER: wordpress
          WORDPRESS_PASSWORD: wordpress
        networks:
            -wpsite
  #mapping volume of db_data(mysql) and wpsite(wordpress)
      networks:
      wpsite:
      volumes:
        db_data:



        
